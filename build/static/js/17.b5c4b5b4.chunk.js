(this.webpackJsonppplatform=this.webpackJsonppplatform||[]).push([[17],{402:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return r}));var n=a(409),l=a.n(n);function i(e){for(var t="",a=e.toString().split("").reverse().join(""),n=0;n<a.length;n++)n%3===0&&(t+=a.substr(n,3)+".");return t.split("",t.length-1).reverse().join("")}function r(e){for(var t=[{divider:1e18,suffix:"E"},{divider:1e15,suffix:"P"},{divider:1e12,suffix:"T"},{divider:1e9,suffix:"G"},{divider:1e6,suffix:"M"},{divider:1e3,suffix:"k"}],a=0;a<t.length;a++)if(e>=t[a].divider)return(e/t[a].divider).toString()+t[a].suffix;return e.toString()}l.a.register("locale","indonesia",{delimiters:{thousands:".",decimal:","},abbreviations:{thousand:"rb",million:"jt",billion:"M",trillion:"T"},ordinal:function(e){return 1===e?"er":"\xe8me"},currency:{symbol:"IDR"}}),l.a.locale("indonesia")},796:function(e,t,a){"use strict";a.r(t);var n=a(14),l=a(156),i=a.n(l),r=a(201),c=a(2),o=a(11),s=a(0),m=a.n(s),d=a(383),u=a(388),v=a(390),f=a(391),p=a(392),E=a(393),g=a(217),b=a(629),y=a(382),x=a(376),h=a(385),N=a(386),j=a(368),O=a(394),D=a(381),C=a(804),M=a(802),k=a(484),w=a(27),A=a(86),S=a.n(A),Y=a(18),I=a(171),T=a(37),F=a.n(T),R=a(402),L=a(26),z=a(59),V=a(492),P=a(769),_=a(771),B=a.n(_),U=(a(772),a(24)),H=a(773),J=a(21),G=a(17),K=a(774);var W=a(788),X=a.n(W),Z=a(111),q=a(403),$={draft:"Draft",pending:"For Review",rejected:"To Revise",approved:"Approved"},Q=(t.default=function(){var e,t,a,l,C,M,k,A,T,_,W,ee,te,ae,ne,le,ie,re,ce,oe,se,me,de,ue,ve=Object(Z.b)(),fe=Object(Y.i)(),pe=Object(s.useRef)(),Ee=Object(s.useRef)(null),ge=Object(q.b)(),be=Object(o.a)(ge,2),ye=be[0],xe=be[1],he=Object(s.useState)(V.EditorState.createEmpty()),Ne=Object(o.a)(he,2),je=Ne[0],Oe=Ne[1],De=Object(s.useState)({idActivity:"",comment:""}),Ce=Object(o.a)(De,2),Me=Ce[0],ke=Ce[1],we=Object(s.useState)({id:0,status:"",statusMessage:"",open:!1}),Ae=Object(o.a)(we,2),Se=Ae[0],Ye=Ae[1],Ie=Object(I.b)((function(){return"v1/project/".concat(fe.params.projectId,"/activity?&sort=").concat(ye.sortActivity.value).concat(ye.category?"&category=".concat(ye.category.value):"").concat(ye.searchActivity?"&search=".concat(ye.searchActivity):"")})),Te=Ie.data,Fe=Ie.error,Re=Ie.mutate,Le=!Te||Fe,ze=Object(s.useMemo)((function(){var e,t;return null!==(e=null===Te||void 0===Te||null===(t=Te.data)||void 0===t?void 0:t.data)&&void 0!==e?e:[]}),[Te]),Ve=Object(s.useMemo)((function(){var e,t,a,n;return(null!==(e=null===ze||void 0===ze||null===(t=ze.professional)||void 0===t?void 0:t.map((function(e){return{name:e.name,id:e.id,role:"professional"}})))&&void 0!==e?e:[]).concat([{name:null===ze||void 0===ze||null===(a=ze.client)||void 0===a?void 0:a.name,id:null===ze||void 0===ze||null===(n=ze.client)||void 0===n?void 0:n.id,role:"client"}])}),[ze]),Pe=Object(s.useMemo)((function(){var e,t;return null!==(e=null===ze||void 0===ze||null===(t=ze.activityDetails)||void 0===t?void 0:t.filter((function(e){return"deliverable"===e.category})).sort((function(e,t){return e.id-t.id})))&&void 0!==e?e:null}),[ze]),_e=Object(w.a)({initialValues:{idActivity:0,category:"discussion",content:{},text:"",isDraft:"false",files:[]},onSubmit:function(e,t){var a=t.setSubmitting,n=(t.setErrors,t.setValues);a(!0);var l=new FormData;e.idActivity&&l.append("idActivity",e.idActivity),l.append("category",e.category),l.append("content",JSON.stringify(e.content)),l.append("text",e.text),l.append("isDraft",e.isDraft),e.files.length>0&&e.files.filter((function(e){return!e.id})).map((function(e,t){return l.append("file"+(t+1),e.file,e.file.name)})),e.idActivity?G.a.put("v1/project/".concat(fe.params.projectId,"/activity"),l).then((function(e){J.a.success("Create Discussion Successfully"),n({idActivity:0,category:"discussion",content:{},text:"",isDraft:"false",files:[]}),Oe(V.EditorState.createEmpty()),Re()})).catch((function(e){J.a.error("Create Discussion Failed.")})).finally((function(){a(!1)})):G.a.post("v1/project/".concat(fe.params.projectId,"/activity"),l).then((function(e){J.a.success("Create Discussion Successfully"),n({idActivity:0,category:"discussion",content:{},text:"",isDraft:"false",files:[]}),Oe(V.EditorState.createEmpty()),Re()})).catch((function(e){J.a.error("Create Discussion Failed.")})).finally((function(){a(!1)}))}}),Be=_e.values,Ue=_e.setValues,He=_e.handleSubmit,Je=_e.isSubmitting,Ge=Object(s.useCallback)((function(e){var t,a;"discussion"===e?Ue((function(t){return Object(c.a)(Object(c.a)({},t),{},{category:e})})):Pe.length>0&&"draft"===Pe[Pe.length-1].status?(Ue({idActivity:Pe[Pe.length-1].id,category:e,content:{attendees:Ve,additionalAttendees:null===(t=Pe[Pe.length-1].content)||void 0===t?void 0:t.additionalAttendees,meeting:null===(a=Pe[Pe.length-1].content)||void 0===a?void 0:a.meeting},text:Pe[Pe.length-1].text,isDraft:"true",files:Pe[Pe.length-1].files}),Oe(V.EditorState.createWithContent(V.ContentState.createFromBlockArray(Object(V.convertFromHTML)(Pe[Pe.length-1].text))))):Ue((function(t){return Object(c.a)(Object(c.a)({},t),{},{idActivity:0,category:e,content:{attendees:Ve,additionalAttendees:[],meeting:{date:F()().format("DD MMMM YYYY"),startTime:F()().format("HH:mm"),endTime:""}}})}))}),[Ue,Ve,Pe]),Ke=Object(s.useCallback)((function(e){Ue((function(t){return Object(c.a)(Object(c.a)({},t),{},{content:Object(c.a)(Object(c.a)({},t.content),{},{additionalAttendees:null!==e&&void 0!==e?e:[]})})}))}),[Ue]),We=Object(s.useCallback)((function(e){var t=e.target.value;Ue((function(e){return Object(c.a)(Object(c.a)({},e),{},{content:Object(c.a)(Object(c.a)({},e.content),{},{meeting:Object(c.a)(Object(c.a)({},e.content.meeting),{},{endTime:t})})})}))}),[Ue]),Xe=Object(s.useCallback)(function(){var e=Object(r.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue((function(e){return Object(c.a)(Object(c.a)({},e),{},{isDraft:t})}));case 2:He();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[Ue,He]),Ze=Object(s.useCallback)((function(e,t,a){G.a.put("v1/project/".concat(fe.params.projectId,"/activity-status"),{idActivity:e,status:t,statusMessage:a}).then((function(e){J.a.success("Verify Deliverable Successfully"),Re()})).catch((function(e){J.a.error("Verify Deliverable Failed.")})).finally((function(){Ye({id:0,status:"",statusMessage:"",open:!1})}))}),[fe.params.projectId,Re]),qe=Object(s.useCallback)((function(e){e.preventDefault();var t=e.target.files;t[0].size>5242880?J.a.error("Maximum file size is 5mb"):Ue((function(e){return Object(c.a)(Object(c.a)({},e),{},{files:[].concat(Object(n.a)(e.files),[{preview:URL.createObjectURL(t[0]),file:t[0]}])})}))}),[Ue]),$e=Object(s.useCallback)((function(e){Ue((function(t){return Object(c.a)(Object(c.a)({},t),{},{files:t.files.filter((function(t){return t.preview!==e}))})}))}),[Ue]),Qe=Object(s.useCallback)((function(e){G.a.put("v1/project/".concat(fe.params.projectId,"/activity-meeting"),{meetingDetails:{link:ze.meetingDetails.link,date:F()(e)}}).then((function(e){Re()}))}),[ze,fe.params.projectId,Re]),et=Object(s.useCallback)((function(e){xe((function(t){return Object(c.a)(Object(c.a)({},t),{},{category:null!==e&&void 0!==e?e:""})}))}),[xe]),tt=Object(s.useCallback)((function(e){xe((function(t){return Object(c.a)(Object(c.a)({},t),{},{sortActivity:null!==e&&void 0!==e?e:""})}))}),[xe]),at=Object(s.useCallback)((function(e){var t=e.target.value;xe((function(e){return Object(c.a)(Object(c.a)({},e),{},{searchActivity:t})}))}),[xe]);return m.a.createElement(d.a,null,m.a.createElement(u.a,{xs:"12"},m.a.createElement("div",{className:"font-xl font-weight-bold mb-4"},ze.projectName)),m.a.createElement(u.a,{xs:"12",md:"4"},m.a.createElement(v.a,{className:"shadow-sm"},m.a.createElement(f.a,null,m.a.createElement(d.a,null,m.a.createElement(u.a,{xs:"12"},m.a.createElement("div",null,m.a.createElement("span",{className:"text-muted"},"Client")," ",null===ze||void 0===ze||null===(e=ze.client)||void 0===e?void 0:e.name),m.a.createElement("div",null,m.a.createElement("span",{className:"text-muted"},"Consultant")," ",(null===ze||void 0===ze||null===(t=ze.professional)||void 0===t?void 0:t.length)?null===ze||void 0===ze||null===(a=ze.professional[0])||void 0===a?void 0:a.name:""),m.a.createElement("div",null,m.a.createElement("span",{className:"text-muted"},"Contract value")," IDR ",Object(R.b)(null!==(l=null===ze||void 0===ze?void 0:ze.contractValue)&&void 0!==l?l:0)),m.a.createElement("div",null,m.a.createElement("span",{className:"text-muted"},"Starting Date")," ",F()(null===ze||void 0===ze?void 0:ze.stratingDate).format("DD MMMM YYYY")),m.a.createElement("div",null,m.a.createElement("span",{className:"text-muted"},"Closing Date")," ",F()(null===ze||void 0===ze?void 0:ze.closingDate).format("DD MMMM YYYY")))))),m.a.createElement(v.a,{className:"shadow-sm"},m.a.createElement(f.a,null,m.a.createElement(d.a,null,m.a.createElement(u.a,{xs:"12"},m.a.createElement("div",{className:"font-lg font-weight-bold mb-3"},"Meeting"),m.a.createElement("div",{className:"text-muted"},"Meeting Link ",m.a.createElement("a",{href:null!==(C=null===ze||void 0===ze||null===(M=ze.meetingDetails)||void 0===M?void 0:M.link)&&void 0!==C?C:"",target:"_blank",rel:"noopener noreferrer",className:"font-weight-bold ml-1"},"Click here")," "),m.a.createElement("div",{className:"mt-2"},m.a.createElement("div",{className:"text-muted mb-1"},"Meeting Date"),m.a.createElement(p.a,null,m.a.createElement(E.a,{addonType:"prepend",className:"w-100"},m.a.createElement(S.a,{required:!0,name:"startDate",selected:new Date(null!==(k=null===ze||void 0===ze||null===(A=ze.meetingDetails)||void 0===A?void 0:A.date)&&void 0!==k?k:F()()),dateFormat:"dd MMMM yyyy hh:mm",minDate:new Date,className:"form-control",showTimeInput:!0,autoComplete:"off",onSelect:Qe,onChangeRaw:function(e){return e.preventDefault()}}),m.a.createElement(g.a,null,m.a.createElement(L.a,{icon:"calendar-alt"})))))))))),m.a.createElement(u.a,{xs:"12",md:"8"},m.a.createElement(v.a,{className:"shadow-sm"},m.a.createElement(f.a,null,m.a.createElement(d.a,null,m.a.createElement(u.a,{xs:"12"},m.a.createElement("div",{className:"font-lg font-weight-bold mb-3"},"Key Milestone")),m.a.createElement(u.a,{xs:"12"},m.a.createElement(b.a,{bordered:!0,className:"text-center"},m.a.createElement("thead",null,m.a.createElement("tr",null,m.a.createElement("th",null,"Activities"),m.a.createElement("th",null,"Date"))),m.a.createElement("tbody",null,null===ze||void 0===ze||null===(T=ze.milestoneDetails)||void 0===T?void 0:T.map((function(e,t){return m.a.createElement("tr",{key:t},m.a.createElement("td",null,e.activities),m.a.createElement("td",null,F()(e.date).add(t,"days").format("DD MMMM YYYY")))}))))),m.a.createElement(u.a,{xs:"12",className:"d-flex justify-content-between align-items-center"},m.a.createElement(y.a,{color:"pinion-primary",className:"mr-2 text-light",id:"popover-file-list"},"Project Files"),m.a.createElement(Q,{data:null===ze||void 0===ze?void 0:ze.fileDetails}),m.a.createElement("div",null,m.a.createElement("div",{className:"mb-1 text-muted"},"Status of deliverable"),m.a.createElement("div",{className:"mb-3 text-center"},m.a.createElement(x.a,{color:"approved"===(null===Pe||void 0===Pe||null===(_=Pe.filter((function(e){return"draft"!==e.status})).pop())||void 0===_?void 0:_.status)?"success":"rejected"===(null===Pe||void 0===Pe||null===(W=Pe.filter((function(e){return"draft"!==e.status})).pop())||void 0===W?void 0:W.status)?"danger":"pending"===(null===Pe||void 0===Pe||null===(ee=Pe.filter((function(e){return"draft"!==e.status})).pop())||void 0===ee?void 0:ee.status)?"warning":"secondary",className:"font-lg text-light text-uppercase",style:{cursor:"pointer"},onClick:function(){return pe.current.scrollIntoView({behavior:"smooth"})}},null!==(te=$[null===Pe||void 0===Pe||null===(ae=Pe.filter((function(e){return"draft"!==e.status})).pop())||void 0===ae?void 0:ae.status])&&void 0!==te?te:"Draft")))))))),m.a.createElement(u.a,{xs:"12"},m.a.createElement(v.a,{className:"shadow-sm"},m.a.createElement(f.a,null,m.a.createElement(d.a,null,m.a.createElement(u.a,{xs:"12",className:"mb-3"},m.a.createElement(y.a,{color:"".concat("discussion"===(null===Be||void 0===Be?void 0:Be.category)?"pinion-primary":"pinion-secondary"),className:"text-light mr-3",onClick:function(){return Ge("discussion")}},"Discussion"),"professional"===ve.role&&["draft","rejected"].includes((null===Pe||void 0===Pe?void 0:Pe.length)>0?Pe[(null===Pe||void 0===Pe?void 0:Pe.length)-1].status:"draft")&&m.a.createElement(y.a,{color:"".concat("deliverable"===(null===Be||void 0===Be?void 0:Be.category)?"pinion-primary":"pinion-secondary"),className:"text-dark",onClick:function(){return Ge("deliverable")}},"Deliverable")),"deliverable"===Be.category&&m.a.createElement(u.a,{xs:"12"},m.a.createElement(d.a,{className:"my-3"},m.a.createElement(u.a,{xs:"12",md:"4",lg:"3",className:"d-flex align-items-center"},m.a.createElement(h.a,null,"Meeting Date")),m.a.createElement(u.a,{xs:"12",md:"8",lg:"9",className:"d-flex align-items-center justify-content-between"},null===Be||void 0===Be||null===(ne=Be.content)||void 0===ne||null===(le=ne.meeting)||void 0===le?void 0:le.date)),m.a.createElement(d.a,{className:"my-3"},m.a.createElement(u.a,{xs:"12",md:"4",lg:"3",className:"d-flex align-items-center"},m.a.createElement(h.a,null,"Meeting Time")),m.a.createElement(u.a,{xs:"12",md:"8",lg:"9",className:"d-flex align-items-center justify-content-between"},m.a.createElement(p.a,null,m.a.createElement(E.a,{addonType:"prepend"},m.a.createElement(g.a,{className:"bg-transparent border-0 pl-0"},null===Be||void 0===Be||null===(ie=Be.content)||void 0===ie||null===(re=ie.meeting)||void 0===re?void 0:re.startTime," -"),m.a.createElement(X.a,{type:"text",mask:"99:99",value:null===Be||void 0===Be||null===(ce=Be.content)||void 0===ce||null===(oe=ce.meeting)||void 0===oe?void 0:oe.endTime,onChange:We,placeholder:"Example 08:00"},(function(e){return m.a.createElement(N.a,e)})))))),m.a.createElement(d.a,{className:"my-3"},m.a.createElement(u.a,{xs:"12",md:"4",lg:"3",className:"d-flex align-items-center"},m.a.createElement(h.a,null,"Attendees")),m.a.createElement(u.a,{xs:"12",md:"8",lg:"9",className:"d-flex"},null===Be||void 0===Be||null===(se=Be.content)||void 0===se||null===(me=se.attendees)||void 0===me?void 0:me.map((function(e,t){var a;return m.a.createElement("div",{key:t}," ",e.name,(null===Be||void 0===Be||null===(a=Be.content)||void 0===a?void 0:a.attendees.length)===t+1?"":", ")})))),m.a.createElement(d.a,{className:"my-3"},m.a.createElement(u.a,{xs:"12",md:"4",lg:"3",className:"d-flex align-items-center"},m.a.createElement(h.a,null,"Additional attendees")),m.a.createElement(u.a,{xs:"12",md:"8",lg:"9"},m.a.createElement(H.a,{isClearable:!0,isMulti:!0,placeholder:"Input attendees email...",value:null===Be||void 0===Be||null===(de=Be.content)||void 0===de?void 0:de.additionalAttendees,isValidNewOption:function(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())},onChange:Ke,formatGroupLabel:function(e){return m.a.createElement("div",{style:{display:"flex",alignItems:"center"}},m.a.createElement("span",{style:{fontWeight:"bold",fontSize:"10px",letterSpacing:"1px"},className:"text-muted"},e.label))},noOptionsMessage:function(e){return m.a.createElement("span",null,"Input attendees email")},components:{DropdownIndicator:function(){return null},IndicatorSeparator:function(){return null}}})))),m.a.createElement(u.a,{xs:"12"},m.a.createElement(P.Editor,{editorState:je,editorStyle:{height:"300px"},onEditorStateChange:function(e){return Oe(e)},onContentStateChange:function(e){return function(e){Ue((function(t){return Object(c.a)(Object(c.a)({},t),{},{text:B()(e)})}))}(e)}})),m.a.createElement(u.a,{xs:"12",className:"my-3"},null===Be||void 0===Be||null===(ue=Be.files)||void 0===ue?void 0:ue.map((function(e,t){var a,n,l;return m.a.createElement(s.Fragment,{key:t},m.a.createElement("div",{className:"rounded border border-dark d-inline p-1"},(null===e||void 0===e||null===(a=e.file)||void 0===a?void 0:a.name)&&m.a.createElement(L.a,{icon:"times",color:"#f86c6b",className:"mr-1",onClick:function(){return $e(e.preview)},style:{cursor:"pointer"}})," ",null!==(n=null===e||void 0===e||null===(l=e.file)||void 0===l?void 0:l.name)&&void 0!==n?n:e.fileName),m.a.createElement("div",{className:"mb-3"}))}))),m.a.createElement(u.a,{xs:"12"},m.a.createElement("input",{type:"file",ref:Ee,style:{display:"none"},onChange:function(e){return qe(e)}}),m.a.createElement(y.a,{color:"pinion-secondary",className:"text-light",onClick:function(){return Ee.current.click()}}," ",m.a.createElement(L.a,{icon:"upload"})," Attachment"),m.a.createElement(y.a,{color:"pinion-primary",className:"float-right",onClick:function(){return Xe("false")},disabled:Je},Je?m.a.createElement(m.a.Fragment,null,m.a.createElement(j.a,{color:"light",size:"sm"})," Loading..."):"Post"),"deliverable"===Be.category&&m.a.createElement(y.a,{color:"secondary",className:"float-right mr-2 text-light",onClick:function(){return Xe("true")},disabled:Je},Je?m.a.createElement(m.a.Fragment,null,m.a.createElement(j.a,{color:"light",size:"sm"})," Loading..."):"Draft")))))),m.a.createElement(u.a,{xs:"12"},m.a.createElement(d.a,null,m.a.createElement(u.a,{xs:"12",md:"3"},m.a.createElement("div",{className:"mb-1 text-muted"},"Category"),m.a.createElement("div",{className:"mb-3"},m.a.createElement(U.a,{options:[{value:"deliverable",label:"Deliverable"},{value:"discussion",label:"Discussion"}],value:ye.category,isClearable:!0,onChange:function(e){return et(e)},components:{DropdownIndicator:function(){return null},IndicatorSeparator:function(){return null}}}))),m.a.createElement(u.a,{xs:"12",md:"3"},m.a.createElement("div",{className:"mb-1 text-muted"},"Date Sort"),m.a.createElement("div",{className:"mb-3"},m.a.createElement(U.a,{options:[{label:"Newest to Oldest",value:"createdAt_DESC"},{label:"Oldest to Newest",value:"createdAt_ASC"}],value:ye.sortActivity,onChange:function(e){return tt(e)},components:{DropdownIndicator:function(){return null},IndicatorSeparator:function(){return null}}}))),m.a.createElement(u.a,{xs:"12",md:"3",className:"justify-content-end"},m.a.createElement("div",{className:"mb-1 text-muted"},"\xa0"),m.a.createElement("div",{className:"mb-3"},m.a.createElement(N.a,{type:"text",placeholder:"Search...",value:ye.searchActivity,onChange:at}))),m.a.createElement(u.a,{xs:"12"},Le?m.a.createElement(v.a,{className:"shadow-sm"},m.a.createElement(f.a,{className:"position-relative"},m.a.createElement("div",{style:{position:"absolute",top:0,right:0,bottom:0,left:0,display:"flex",justifyContent:"center",alignItems:"center"}},m.a.createElement(j.a,{style:{width:48,height:48}})))):m.a.createElement("div",null,ze.activityDetails.length<=0&&m.a.createElement(v.a,{className:"shadow-sm"},m.a.createElement(f.a,{className:"position-relative"},m.a.createElement("div",{style:{width:"100%",height:"500px"},className:"d-flex align-items-center justify-content-center text-muted"}," No Activities "))),ze.activityDetails.filter((function(e){return"draft"!==e.status})).sort((function(e,t){return e.id-t.id})).map((function(e,t){var a,n,l,i,r,c,o,p,E,g,b,N,j,O,D,C,M,k;return m.a.createElement(v.a,{className:"shadow-sm",key:t},m.a.createElement(f.a,{className:"position-relative"},m.a.createElement("div",{className:"position-absolute",style:{right:20}},m.a.createElement(x.a,{className:"font-lg text-uppercase text-light",color:"".concat("document"===e.category?"danger":"discussion"===e.category?"warning":"primary")},e.category)),m.a.createElement("div",{className:"position-absolute",style:{top:55,right:20}},"deliverable"===e.category&&m.a.createElement(x.a,{color:"approved"===e.status?"success":"rejected"===e.status?"danger":"pending"===e.status?"warning":"secondary",className:"font-sm text-light text-uppercase",style:{cursor:"pointer"},onClick:function(){return pe.current.scrollIntoView({behavior:"smooth"})}},null!==(a=$[e.status])&&void 0!==a?a:"Draft")),m.a.createElement("div",{className:"font-lg font-weight-bold mb-1"},null===e||void 0===e||null===(n=e.createdBy)||void 0===n?void 0:n.name),m.a.createElement("div",{className:"text-muted mb-3"},F.a.utc(e.createdAt).local().format("DD MMMM YYYY hh:mm")),"deliverable"===e.category&&m.a.createElement("div",null,m.a.createElement(d.a,{className:"my-1"},m.a.createElement(u.a,{xs:"12",md:"4",lg:"3",className:"d-flex align-items-center"},m.a.createElement(h.a,null,"Meeting Date")),m.a.createElement(u.a,{xs:"12",md:"8",lg:"9",className:"d-flex align-items-center justify-content-between"},null===e||void 0===e||null===(l=e.content)||void 0===l||null===(i=l.meeting)||void 0===i?void 0:i.date)),m.a.createElement(d.a,{className:"my-1"},m.a.createElement(u.a,{xs:"12",md:"4",lg:"3",className:"d-flex align-items-center"},m.a.createElement(h.a,null,"Meeting Time")),m.a.createElement(u.a,{xs:"12",md:"8",lg:"9",className:"d-flex align-items-center justify-content-between"},null===e||void 0===e||null===(r=e.content)||void 0===r||null===(c=r.meeting)||void 0===c?void 0:c.startTime," - ",null===e||void 0===e||null===(o=e.content)||void 0===o||null===(p=o.meeting)||void 0===p?void 0:p.endTime)),m.a.createElement(d.a,{className:"my-1"},m.a.createElement(u.a,{xs:"12",md:"4",lg:"3",className:"d-flex align-items-center"},m.a.createElement(h.a,null,"Attendees")),m.a.createElement(u.a,{xs:"12",md:"8",lg:"9",className:"d-flex"},null===e||void 0===e||null===(E=e.content)||void 0===E||null===(g=E.attendees)||void 0===g?void 0:g.map((function(t,a){var n;return m.a.createElement("div",{key:a}," ",t.name,m.a.createElement("span",{className:"text-capitalize"},"(",t.role,")"),(null===e||void 0===e||null===(n=e.content)||void 0===n?void 0:n.attendees.length)===a+1?"":",")})))),m.a.createElement(d.a,{className:"my-1"},m.a.createElement(u.a,{xs:"12",md:"4",lg:"3",className:"d-flex align-items-center"},m.a.createElement(h.a,null,"Additional attendees")),m.a.createElement(u.a,{xs:"12",md:"8",lg:"9"},null===e||void 0===e||null===(b=e.content)||void 0===b?void 0:b.additionalAttendees.map((function(e){return e.label}))))),m.a.createElement("div",{className:"mb-3 activity-text"},Object(K.a)(e.text)),m.a.createElement("div",{className:"mb-4"},null===e||void 0===e||null===(N=e.files)||void 0===N?void 0:N.map((function(e,t){return m.a.createElement(s.Fragment,{key:t},m.a.createElement("div",{className:"rounded border d-inline p-1"},m.a.createElement("a",{href:e.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"text-dark",style:{textDecoration:"none"}},e.fileName)),m.a.createElement("div",{className:"mb-3"}))}))),"pending"===e.status&&"professional"!==ve.role&&m.a.createElement("div",{className:"mb-3 d-flex justify-content-end"},m.a.createElement(y.a,{color:"warning",onClick:function(){return Ye({id:e.id,status:"rejected",statusMessage:"",open:!0})}},"To Revise"),m.a.createElement(y.a,{color:"success",className:"mx-2",onClick:function(){return Ye({id:e.id,status:"approved",statusMessage:"",open:!0})}},"Approve"),m.a.createElement(y.a,{color:"secondary"},"Download")),(null===(j=e.content)||void 0===j||null===(O=j.replies)||void 0===O?void 0:O.length)>0&&m.a.createElement("div",{className:"pl-5"},null===(D=e.content)||void 0===D||null===(C=D.replies)||void 0===C?void 0:C.map((function(e,t){return m.a.createElement(v.a,{className:"my-1",key:t},m.a.createElement(f.a,{className:"p-3"},m.a.createElement("div",{className:"font-lg font-weight-bold mb-1"},e.createdBy.name),m.a.createElement("div",{className:"text-muted mb-3"},F()(e.createdAt).format("DD MMMM YYYY hh:mm")),m.a.createElement("div",null,e.comment)))}))),m.a.createElement("div",{className:"".concat((null===(M=e.content)||void 0===M||null===(k=M.replies)||void 0===k?void 0:k.length)>0&&"pl-5")},m.a.createElement(z.a,{rows:"3",name:"comment",id:"comment",style:{borderRadius:"10px"},className:"form-control",placeholder:"Type your reply...",value:e.id===Me.idActivity?Me.comment:"",onChange:function(t){return ke({idActivity:e.id,comment:t.target.value})},onKeyPress:function(e){"Enter"===e.key&&(e.target.blur(),G.a.post("v1/project/".concat(fe.params.projectId,"/activity-reply"),Me).then((function(e){J.a.success("Reply Successfully"),ke({idActivity:"",comment:""}),Re()})).catch((function(e){J.a.error("Reply Failed")})))}}))))}))),m.a.createElement("div",{ref:pe}),m.a.createElement(O.a,{isOpen:Se.open,centered:!0,toggle:function(){return Ye({id:0,status:"",statusMessage:"",open:!1})}},m.a.createElement(D.a,{className:"p-5"},m.a.createElement(d.a,null,m.a.createElement(u.a,{xs:"12"},m.a.createElement("div",{className:"mb-2"},"approved"===Se.status?"You are about to submit your deliverable for approval process.":"Are you sure you want to 'Revise' this deliverable")),m.a.createElement(u.a,{xs:"12",className:"d-flex justify-content-end mt-5"},m.a.createElement(y.a,{color:"secondary",className:"mr-2",onClick:function(){return Ye({id:0,status:"",statusMessage:"",open:!1})}},"Cancel"),m.a.createElement(y.a,{color:"primary",className:"text-capitalize",disabled:Je,onClick:function(){return Ze(Se.id,Se.status,Se.statusMessage)}},Se.status)))))))))},function(e){var t,a,n,l=e.data,i=Array(9).fill();return m.a.createElement(C.a,{trigger:"legacy",placement:"bottom",target:"popover-file-list",popperClassName:"popover-file-list"},m.a.createElement(M.a,null,m.a.createElement(d.a,{className:"p-2"},m.a.createElement(u.a,{xs:"8"},m.a.createElement("div",{className:"font-weight-bold"},"Project Files")),m.a.createElement(u.a,{xs:"4"},m.a.createElement(k.a,{striped:!0,value:(null!==(t=null===l||void 0===l||null===(a=l.fileList)||void 0===a?void 0:a.length)&&void 0!==t?t:0)/9*100},m.a.createElement("div",{className:"text-dark text-center"},"Storage Capacity ",null===l||void 0===l||null===(n=l.fileList)||void 0===n?void 0:n.length,"/9"))),m.a.createElement(u.a,{xs:"12",className:"my-3"},m.a.createElement(d.a,null,i.map((function(e,t){var a,n,i;return m.a.createElement(u.a,{xs:"12",key:t},m.a.createElement("a",{href:null!==(a=null===l||void 0===l||null===(n=l.fileList[t])||void 0===n?void 0:n.fileUrl)&&void 0!==a?a:"",target:"_blank",rel:"noopener noreferrer",className:"text-dark"},t+1,". ",null===l||void 0===l||null===(i=l.fileList[t])||void 0===i?void 0:i.fileName))})))),m.a.createElement(u.a,{xs:"12"},m.a.createElement("div",{className:"text-muted"},"Your project storage is limited at maximum 9 files or XX MB")))))})}}]);
//# sourceMappingURL=17.b5c4b5b4.chunk.js.map